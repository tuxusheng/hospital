<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ys.hospital.dao.MedicineMapper">

    <resultMap type="com.ys.hospital.pojo.Medicine" id="MedicineMap">
        <result property="medicineId" column="medicine_id" jdbcType="INTEGER"/>
        <result property="medicineName" column="medicine_name" jdbcType="VARCHAR"/>
        <result property="medicineType" column="medicine_type" jdbcType="VARCHAR"/>
        <result property="medicinePrice" column="medicine_price" jdbcType="NUMERIC"/>
        <result property="medicineInventory" column="medicine_inventory" jdbcType="INTEGER"/>
        <result property="medicine_ efficacy" column="medicine_ efficacy" jdbcType="VARCHAR"/>
    </resultMap>

    <!--查询所有Medicine信息-->
    <select id="queryAllMedicine" resultMap="MedicineMap">
        select
          medicine_id, medicine_name, medicine_type, medicine_price, medicine_inventory, medicine_ efficacy
        from medicine
    </select>

    <!--根据实体类Medicine的相关属性查询实体类Medicine-->
    <select id="queryMedicineByParam" resultMap="MedicineMap">
        select
          medicine_id, medicine_name, medicine_type, medicine_price, medicine_inventory, medicine_ efficacy
        from medicine
        <where>
            <if test="medicineId != null">
                and medicine_id = #{medicineId}
            </if>
            <if test="medicineName != null and medicineName != ''">
                and medicine_name = #{medicineName}
            </if>
            <if test="medicineType != null and medicineType != ''">
                and medicine_type = #{medicineType}
            </if>
            <if test="medicinePrice != null">
                and medicine_price = #{medicinePrice}
            </if>
            <if test="medicineInventory != null">
                and medicine_inventory = #{medicineInventory}
            </if>
            <if test="medicine_ efficacy != null and medicine_ efficacy != ''">
                and medicine_ efficacy = #{medicine_ efficacy}
            </if>
        </where>
    </select>

    <!--新增Medicine数据-->
    <insert id="insertMedicine" keyProperty="medicineId" useGeneratedKeys="true">
        insert into medicine(medicine_name, medicine_type, medicine_price, medicine_inventory, medicine_ efficacy)
        values (#{medicineName}, #{medicineType}, #{medicinePrice}, #{medicineInventory}, #{medicine_ efficacy})
    </insert>

    <!--修改Medicine记录-->
    <update id="updateMedicine">
        update medicine
        <set>
            <if test="medicineName != null and medicineName != ''">
                medicine_name = #{medicineName},
            </if>
            <if test="medicineType != null and medicineType != ''">
                medicine_type = #{medicineType},
            </if>
            <if test="medicinePrice != null">
                medicine_price = #{medicinePrice},
            </if>
            <if test="medicineInventory != null">
                medicine_inventory = #{medicineInventory},
            </if>
            <if test="medicine_ efficacy != null and medicine_ efficacy != ''">
                medicine_ efficacy = #{medicine_ efficacy},
            </if>
        </set>
        where medicine_id = #{medicineId}
    </update>

    <!--通过主键删除一条Medicine记录-->
    <delete id="deleteMedicineById">
        delete from medicine where medicine_id = #{medicineId}
    </delete>

</mapper>